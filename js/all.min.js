$(function(){var t="",e=[],n=[],o=0;$.get("data.json").done(function(a){t=a.title,e=a.images,o=Math.ceil(e.length/6);for(var i=0;i<o;i++){n.push([]);for(var r=0;r<6;r++)e[6*i+r]&&n[i].push(e[6*i+r])}$("#title").html(t),TweenMax.from("#title",.3,{autoAlpha:0,ease:Power1.easeIn,x:-200,y:-100}),G.renderFrame(n,0,o),TweenMax.from("#pagination",.3,{autoAlpha:0,delay:2,ease:Power1.easeIn,x:200,y:100})}),$("#main").on("click","#pagination-next",function(){var t=$(this),e=t.data("current");G.unrenderFrame(n,e,o)}),$("#main").on("click","#pagination-prev",function(){var t=$(this),e=t.data("current");G.unrenderFrame(n,e-2,o)}),$("#main").on("click",".gallery-item",function(){var t=$(this),e=t.offset(),n=t.innerWidth(),o=t.innerHeight(),a=t.clone();t.addClass("cloned"),a.addClass("clone").css({position:"fixed",top:e.top,left:e.left,height:o,width:n}),$("#main").append(a),TweenMax.to(a,.5,{className:"+=is-expanded",top:0,left:0,bottom:0,right:0,height:"100vh",width:"100vw",ease:Bounce.easeOut})}),$("#main").on("click",".gallery-item .close",function(t){t.stopPropagation();var e=$(".cloned"),n=e.offset(),o=e.innerWidth(),a=e.innerHeight(),i=$(this).parent();TweenMax.to(i,.5,{className:"-=is-expanded",top:n.top,left:n.left,height:a,width:o,ease:Bounce.easeOut,onComplete:function(){e.removeClass("cloned"),setTimeout(function(){$(".clone").remove()},1e3)}})})}),G=new function(){var t=this;this.imgTemplate=function(t,e,n){return'<figure id="'+t+'" class="gallery-item"><button type="button" class="close">X</button><img src="'+e+'" alt="" class="gallery-item-img"><figcaption class="gallery-item-caption">'+n+"</figcaption></figure>"},this.prevButton=function(t,e){var n=e?" disabled":"";return'<button type="button" id="pagination-prev" class="pagination-button" data-current="'+t+'"'+n+">Fotos anteriores</button>"},this.nextButton=function(t,e){var n=e?" disabled":"";return'<button type="button" id="pagination-next" class="pagination-button" data-current="'+t+'"'+n+">Fotos siguientes</button>"},this.renderFrame=function(e,n,o){var a="",i=new TimelineMax;e[n].forEach(function(e,n){a+=t.imgTemplate("img-"+n,e.src,e.caption)}),$("#gallery").html(a),i.staggerTo(".gallery-item",.5,{bezier:[{x:-300,y:-150,rotationY:90,rotationX:90,opacity:0},{x:-150,y:-50,rotationY:45,rotationX:45,opacity:.3},{x:0,y:0,rotationY:0,rotationX:0,opacity:1}],ease:Power1.easeInOut},-.3),$("#counter").html(1+n+"/"+o),n+1==o?$("#buttons").html(t.prevButton(n+1,!1)+t.nextButton(n+1,!0)):n+1==1?$("#buttons").html(t.prevButton(n+1,!0)+t.nextButton(n+1,!1)):$("#buttons").html(t.prevButton(n+1,!1)+t.nextButton(n+1,!1))},this.unrenderFrame=function(e,n,o){var a=new TimelineMax({onComplete:function(){t.renderFrame(e,n,o)}});a.staggerTo(".gallery-item",.5,{bezier:[{x:0,y:0,rotationY:0,rotationX:0,opacity:1},{x:-150,y:-50,rotationY:45,rotationX:45,opacity:.3},{x:-300,y:-150,rotationY:90,rotationX:90,opacity:0}],ease:Power1.easeInOut},.3)}};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsInRpdGxlIiwicmF3X2RhdGEiLCJpbWFnZXMiLCJmcmFtZXMiLCJnZXQiLCJkb25lIiwiZGF0YSIsIk1hdGgiLCJjZWlsIiwibGVuZ3RoIiwiaSIsInB1c2giLCJqIiwiaHRtbCIsIlR3ZWVuTWF4IiwiZnJvbSIsImF1dG9BbHBoYSIsImVhc2UiLCJQb3dlcjEiLCJlYXNlSW4iLCJ4IiwieSIsIkciLCJyZW5kZXJGcmFtZSIsImRlbGF5Iiwib24iLCIkYnV0dG9uIiwidGhpcyIsImN1cnJlbnRfZnJhbWUiLCJ1bnJlbmRlckZyYW1lIiwiJGltYWdlIiwicG9zaXRpb24iLCJvZmZzZXQiLCJ3aWR0aCIsImlubmVyV2lkdGgiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsIiRjbG9uZSIsImNsb25lIiwiYWRkQ2xhc3MiLCJjc3MiLCJ0b3AiLCJsZWZ0IiwiYXBwZW5kIiwidG8iLCJjbGFzc05hbWUiLCJib3R0b20iLCJyaWdodCIsIkJvdW5jZSIsImVhc2VPdXQiLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwiJG9yaWdpbmFsIiwib3JpZ2luYWxfcG9zaXRpb24iLCJvcmlnaW5hbF93aWR0aCIsIm9yaWdpbmFsX2hlaWdodCIsInBhcmVudCIsIm9uQ29tcGxldGUiLCJyZW1vdmVDbGFzcyIsInNldFRpbWVvdXQiLCJyZW1vdmUiLCJzZWxmIiwiaW1nVGVtcGxhdGUiLCJpZCIsInNyYyIsImNhcHRpb24iLCJwcmV2QnV0dG9uIiwiZGlzYWJsZWQiLCJpc19kaXNhYmxlZCIsIm5leHRCdXR0b24iLCJmcmFtZSIsImZpZ3VyZXMiLCJ0bCIsIlRpbWVsaW5lTWF4IiwiZm9yRWFjaCIsIml0ZW0iLCJpbmRleCIsInN0YWdnZXJUbyIsImJlemllciIsInJvdGF0aW9uWSIsInJvdGF0aW9uWCIsIm9wYWNpdHkiLCJlYXNlSW5PdXQiXSwibWFwcGluZ3MiOiJBQUFBQSxFQUFBLFdBRUEsR0FBQUMsR0FBQSxHQUNBQyxLQUNBQyxLQUNB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R0FBQTBELFVBQUEsR0FBQUMsVUFBQSxHQUFBQyxRQUFBLEtBQ0E3RCxHQUFBLElBQUFDLEdBQUEsSUFBQTBELFVBQUEsR0FBQUMsVUFBQSxHQUFBQyxRQUFBLElBRUFoRSxLQUFBQyxPQUFBZ0UsV0FDQSIsImZpbGUiOiJhbGwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChmdW5jdGlvbigpe1xuXHQvLyBWYXJzIGRlY2xhcmF0aW9uXG5cdHZhciB0aXRsZSA9IFwiXCI7XG5cdHZhciByYXdfZGF0YSA9IFtdO1xuXHR2YXIgaW1hZ2VzID0gW107XG5cdHZhciBmcmFtZXMgPSAwO1xuXG5cdC8vIEdldCBkYXRhIGZyb20gSlNPTiBmaWxlLCB3aGVuIGRvbmUsIHJlbmRlciBmaXJzdCBmcmFtZVxuXHQkLmdldCgnZGF0YS5qc29uJykuZG9uZShmdW5jdGlvbihkYXRhKXtcblx0XHR0aXRsZSA9IGRhdGEudGl0bGU7XHQvLyBHZXQgdGhlIHRpdGxlIGZyb20gZmlsZVxuXHRcdHJhd19kYXRhID0gZGF0YS5pbWFnZXM7XHQvLyBHZXQgdGhlIGltYWdlcyBmcm9tIGZpbGUgYW5kIHN0b3JlIHRoZW0gaW4gYW4gYXJyYXlcblx0XHRmcmFtZXMgPSBNYXRoLmNlaWwocmF3X2RhdGEubGVuZ3RoLzYpOyAvLyBDYWxjdWxhdGUgdG90YWwgZnJhbWVzIG51bWJlclxuXG5cdFx0Ly8gU29ydCBpbWFnZXMgaW4gYSBiaWRpbW1lbnNpb25hbCBhcnJheSwgZmlyc3QgZGltbWVuc2lvbiBpcyB0aGUgZnJhbWUgbnVtYmVyLCBhbmQgc2Vjb25kIGRpbW1lbnNpb24sIHRoZSBpbWFnZS4gU2l4IGltYWdlcyBwZXIgZnJhbWUuXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IGZyYW1lczsgaSsrKXtcblx0XHRcdGltYWdlcy5wdXNoKFtdKTtcblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCA2OyBqKyspe1xuXHRcdFx0XHRpZihyYXdfZGF0YVs2KmkgKyBqXSl7XG5cdFx0XHRcdFx0aW1hZ2VzW2ldLnB1c2gocmF3X2RhdGFbNippICsgal0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUmVuZGVyIGluaXRpYWwgZGF0YVxuXHRcdCQoJyN0aXRsZScpLmh0bWwodGl0bGUpO1xuXHRcdFR3ZWVuTWF4LmZyb20oJyN0aXRsZScsIC4zLCB7XG5cdFx0XHRhdXRvQWxwaGE6IDAsXG5cdFx0XHRlYXNlOiBQb3dlcjEuZWFzZUluLFxuXHRcdFx0eDogLTIwMCxcblx0XHRcdHk6IC0xMDBcblx0XHR9KTtcblx0XHRHLnJlbmRlckZyYW1lKGltYWdlcywgMCwgZnJhbWVzKTtcblx0XHRUd2Vlbk1heC5mcm9tKCcjcGFnaW5hdGlvbicsIC4zLCB7XG5cdFx0XHRhdXRvQWxwaGE6IDAsXG5cdFx0XHRkZWxheTogMixcblx0XHRcdGVhc2U6IFBvd2VyMS5lYXNlSW4sXG5cdFx0XHR4OiAyMDAsXG5cdFx0XHR5OiAxMDBcblx0XHR9KTtcblx0fSk7XG5cblx0Ly8gTmF2aWdhdGlvbiBiZXR3ZWVuIGZyYW1lcyB1c2luZyB0aGUgYnV0dG9uc1xuXHQkKCcjbWFpbicpLm9uKCdjbGljaycsICcjcGFnaW5hdGlvbi1uZXh0JywgZnVuY3Rpb24oKXtcblx0XHR2YXIgJGJ1dHRvbiA9ICQodGhpcyk7XG5cdFx0dmFyIGN1cnJlbnRfZnJhbWUgPSAkYnV0dG9uLmRhdGEoJ2N1cnJlbnQnKTtcblx0XHRHLnVucmVuZGVyRnJhbWUoaW1hZ2VzLCBjdXJyZW50X2ZyYW1lLCBmcmFtZXMpO1xuXHR9KTtcblx0JCgnI21haW4nKS5vbignY2xpY2snLCAnI3BhZ2luYXRpb24tcHJldicsIGZ1bmN0aW9uKCl7XG5cdFx0dmFyICRidXR0b24gPSAkKHRoaXMpO1xuXHRcdHZhciBjdXJyZW50X2ZyYW1lID0gJGJ1dHRvbi5kYXRhKCdjdXJyZW50Jyk7XG5cdFx0Ry51bnJlbmRlckZyYW1lKGltYWdlcywgY3VycmVudF9mcmFtZSAtIDIsIGZyYW1lcyk7XG5cdH0pO1xuXG5cdC8vIEV4cGFuZGVkIHZpZXcgb2YgYSBwaWN0dXJlXG5cdCQoJyNtYWluJykub24oJ2NsaWNrJywgJy5nYWxsZXJ5LWl0ZW0nLCBmdW5jdGlvbigpe1xuXHRcdHZhciAkaW1hZ2UgPSAkKHRoaXMpO1xuXHRcdHZhciBwb3NpdGlvbiA9ICRpbWFnZS5vZmZzZXQoKTtcblx0XHR2YXIgd2lkdGggPSAkaW1hZ2UuaW5uZXJXaWR0aCgpO1xuXHRcdHZhciBoZWlnaHQgPSAkaW1hZ2UuaW5uZXJIZWlnaHQoKTtcblx0XHR2YXIgJGNsb25lID0gJGltYWdlLmNsb25lKCk7XG5cdFx0JGltYWdlLmFkZENsYXNzKCdjbG9uZWQnKTtcblx0XHQkY2xvbmUuYWRkQ2xhc3MoJ2Nsb25lJykuY3NzKHtcblx0XHRcdC8vYm90dG9tOiBwb3NpdGlvbi50b3AgKyBoZWlnaHQsXG5cdFx0XHQvL3JpZ2h0OiBwb3NpdGlvbi5sZWZ0ICsgd2lkdGgsXG5cdFx0XHRwb3NpdGlvbjogJ2ZpeGVkJyxcblx0XHRcdHRvcDogcG9zaXRpb24udG9wLFxuXHRcdFx0bGVmdDogcG9zaXRpb24ubGVmdCxcblx0XHRcdGhlaWdodDogaGVpZ2h0LFxuXHRcdFx0d2lkdGg6IHdpZHRoXG5cdFx0fSk7XG5cdFx0JCgnI21haW4nKS5hcHBlbmQoJGNsb25lKVxuXHRcdFR3ZWVuTWF4LnRvKCRjbG9uZSwgLjUsIHtcblx0XHRcdGNsYXNzTmFtZTogJys9aXMtZXhwYW5kZWQnLFxuXHRcdFx0dG9wOiAwLFxuXHRcdFx0bGVmdDogMCxcblx0XHRcdGJvdHRvbTogMCxcblx0XHRcdHJpZ2h0OiAwLFxuXHRcdFx0aGVpZ2h0OiBcIjEwMHZoXCIsXG5cdFx0XHR3aWR0aDogXCIxMDB2d1wiLFxuXHRcdFx0ZWFzZTogQm91bmNlLmVhc2VPdXRcblx0XHR9KTtcblx0fSk7XG5cdCQoJyNtYWluJykub24oJ2NsaWNrJywgJy5nYWxsZXJ5LWl0ZW0gLmNsb3NlJywgZnVuY3Rpb24oZSl7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR2YXIgJG9yaWdpbmFsID0gJCgnLmNsb25lZCcpO1xuXHRcdHZhciBvcmlnaW5hbF9wb3NpdGlvbiA9ICRvcmlnaW5hbC5vZmZzZXQoKTtcblx0XHR2YXIgb3JpZ2luYWxfd2lkdGggPSAkb3JpZ2luYWwuaW5uZXJXaWR0aCgpO1xuXHRcdHZhciBvcmlnaW5hbF9oZWlnaHQgPSAkb3JpZ2luYWwuaW5uZXJIZWlnaHQoKTtcblx0XHR2YXIgJGNsb25lID0gJCh0aGlzKS5wYXJlbnQoKTtcblx0XHRUd2Vlbk1heC50bygkY2xvbmUsIC41LCB7XG5cdFx0XHRjbGFzc05hbWU6ICctPWlzLWV4cGFuZGVkJyxcblx0XHRcdHRvcDogb3JpZ2luYWxfcG9zaXRpb24udG9wLFxuXHRcdFx0bGVmdDogb3JpZ2luYWxfcG9zaXRpb24ubGVmdCxcblx0XHRcdGhlaWdodDogb3JpZ2luYWxfaGVpZ2h0LFxuXHRcdFx0d2lkdGg6IG9yaWdpbmFsX3dpZHRoLFxuXHRcdFx0ZWFzZTogQm91bmNlLmVhc2VPdXQsXG5cdFx0XHRvbkNvbXBsZXRlOiBmdW5jdGlvbigpe1xuXHRcdFx0XHQkb3JpZ2luYWwucmVtb3ZlQ2xhc3MoJ2Nsb25lZCcpO1xuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0JCgnLmNsb25lJykucmVtb3ZlKCk7XG5cdFx0XHRcdH0sIDEwMDApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcbn0pO1xuXG4vLyBGdW5jdGlvbnMgZW5jYXBzdWxhdGlvblxuRyA9IG5ldyAoZnVuY3Rpb24oKXtcblx0dmFyIHNlbGYgPSB0aGlzO1xuXHR0aGlzLmltZ1RlbXBsYXRlID0gZnVuY3Rpb24oaWQsIHNyYywgY2FwdGlvbil7XG5cdFx0cmV0dXJuICc8ZmlndXJlIGlkPVwiJytpZCsnXCIgY2xhc3M9XCJnYWxsZXJ5LWl0ZW1cIj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCI+WDwvYnV0dG9uPjxpbWcgc3JjPVwiJytzcmMrJ1wiIGFsdD1cIlwiIGNsYXNzPVwiZ2FsbGVyeS1pdGVtLWltZ1wiPjxmaWdjYXB0aW9uIGNsYXNzPVwiZ2FsbGVyeS1pdGVtLWNhcHRpb25cIj4nK2NhcHRpb24rJzwvZmlnY2FwdGlvbj48L2ZpZ3VyZT4nO1xuXHR9XG5cdHRoaXMucHJldkJ1dHRvbiA9IGZ1bmN0aW9uKGN1cnJlbnRfZnJhbWUsIGRpc2FibGVkKXtcblx0XHR2YXIgaXNfZGlzYWJsZWQgPSAoZGlzYWJsZWQgPyBcIiBkaXNhYmxlZFwiIDogXCJcIik7XG5cdFx0cmV0dXJuICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBpZD1cInBhZ2luYXRpb24tcHJldlwiIGNsYXNzPVwicGFnaW5hdGlvbi1idXR0b25cIiBkYXRhLWN1cnJlbnQ9XCInK2N1cnJlbnRfZnJhbWUrJ1wiJytpc19kaXNhYmxlZCsnPkZvdG9zIGFudGVyaW9yZXM8L2J1dHRvbj4nO1xuXHR9XG5cdHRoaXMubmV4dEJ1dHRvbiA9IGZ1bmN0aW9uKGN1cnJlbnRfZnJhbWUsIGRpc2FibGVkKXtcblx0XHR2YXIgaXNfZGlzYWJsZWQgPSAoZGlzYWJsZWQgPyBcIiBkaXNhYmxlZFwiIDogXCJcIik7XG5cdFx0cmV0dXJuICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBpZD1cInBhZ2luYXRpb24tbmV4dFwiIGNsYXNzPVwicGFnaW5hdGlvbi1idXR0b25cIiBkYXRhLWN1cnJlbnQ9XCInK2N1cnJlbnRfZnJhbWUrJ1wiJytpc19kaXNhYmxlZCsnPkZvdG9zIHNpZ3VpZW50ZXM8L2J1dHRvbj4nO1xuXHR9XG5cdHRoaXMucmVuZGVyRnJhbWUgPSBmdW5jdGlvbihpbWFnZXMsIGZyYW1lLCBmcmFtZXMpe1xuXHRcdHZhciBmaWd1cmVzID0gXCJcIjtcblx0XHR2YXIgdGwgPSBuZXcgVGltZWxpbmVNYXgoKTtcblxuXHRcdGltYWdlc1tmcmFtZV0uZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpbmRleCl7XG5cdFx0XHRmaWd1cmVzICs9IHNlbGYuaW1nVGVtcGxhdGUoJ2ltZy0nICsgaW5kZXgsIGl0ZW0uc3JjLCBpdGVtLmNhcHRpb24pO1xuXHRcdH0pO1xuXHRcdCQoJyNnYWxsZXJ5JykuaHRtbChmaWd1cmVzKTtcblx0XHR0bC5zdGFnZ2VyVG8oJy5nYWxsZXJ5LWl0ZW0nLCAuNSwge1xuXHRcdFx0YmV6aWVyOiBbXG5cdFx0XHRcdHt4Oi0zMDAsIHk6LTE1MCwgcm90YXRpb25ZOiA5MCwgcm90YXRpb25YOiA5MCwgb3BhY2l0eTogMH0sXG5cdFx0XHRcdHt4Oi0xNTAsIHk6LTUwLCByb3RhdGlvblk6IDQ1LCByb3RhdGlvblg6IDQ1LCBvcGFjaXR5OiAwLjN9LFxuXHRcdFx0XHR7eDowLCB5OjAsIHJvdGF0aW9uWTogMCwgcm90YXRpb25YOiAwLCBvcGFjaXR5OiAxfSxcblx0XHRcdF0sXG5cdFx0XHRlYXNlOlBvd2VyMS5lYXNlSW5PdXRcblx0XHR9LCAtMC4zKTtcblx0XHQkKCcjY291bnRlcicpLmh0bWwoKDErZnJhbWUpK1wiL1wiICsgZnJhbWVzKTtcblx0XHRpZihmcmFtZSArIDEgPT0gZnJhbWVzKXtcblx0XHRcdCQoJyNidXR0b25zJykuaHRtbChzZWxmLnByZXZCdXR0b24oZnJhbWUgKyAxLCBmYWxzZSkgKyBzZWxmLm5leHRCdXR0b24oZnJhbWUgKyAxLCB0cnVlKSk7XG5cdFx0fVxuXHRcdGVsc2UgaWYoZnJhbWUgKyAxID09IDEpe1xuXHRcdFx0JCgnI2J1dHRvbnMnKS5odG1sKHNlbGYucHJldkJ1dHRvbihmcmFtZSArIDEsIHRydWUpICsgc2VsZi5uZXh0QnV0dG9uKGZyYW1lICsgMSwgZmFsc2UpKTtcblx0XHR9XG5cdFx0ZWxzZXtcblx0XHRcdCQoJyNidXR0b25zJykuaHRtbChzZWxmLnByZXZCdXR0b24oZnJhbWUgKyAxLCBmYWxzZSkgKyBzZWxmLm5leHRCdXR0b24oZnJhbWUgKyAxLCBmYWxzZSkpO1xuXHRcdH1cblx0fVxuXHR0aGlzLnVucmVuZGVyRnJhbWUgPSBmdW5jdGlvbihpbWFnZXMsIGZyYW1lLCBmcmFtZXMpe1xuXHRcdHZhciB0bCA9IG5ldyBUaW1lbGluZU1heCh7XG5cdFx0XHRvbkNvbXBsZXRlOiBmdW5jdGlvbigpe1xuXHRcdFx0XHRzZWxmLnJlbmRlckZyYW1lKGltYWdlcywgZnJhbWUsIGZyYW1lcyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0dGwuc3RhZ2dlclRvKCcuZ2FsbGVyeS1pdGVtJywgLjUsIHtcblx0XHRcdGJlemllcjogW1xuXHRcdFx0XHR7eDowLCB5OjAsIHJvdGF0aW9uWTogMCwgcm90YXRpb25YOiAwLCBvcGFjaXR5OiAxfSxcblx0XHRcdFx0e3g6LTE1MCwgeTotNTAsIHJvdGF0aW9uWTogNDUsIHJvdGF0aW9uWDogNDUsIG9wYWNpdHk6IDAuM30sXG5cdFx0XHRcdHt4Oi0zMDAsIHk6LTE1MCwgcm90YXRpb25ZOiA5MCwgcm90YXRpb25YOiA5MCwgb3BhY2l0eTogMH0sXG5cdFx0XHRdLFxuXHRcdFx0ZWFzZTpQb3dlcjEuZWFzZUluT3V0XG5cdFx0fSwgLjMpO1xuXHR9XG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
